<!DOCTYPE html>
<html>
<head>
    <title>Loading...</title>
</head>
<body>
    <script>
        function launch() {
            const win = window.open('about:blank', '_blank');
            if (!win) {
                alert("Pop-up blocked! Please allow pop-ups to continue.");
                return;
            }

            const code = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Nexus-Revived</title>
                    <style>
                        body, html { 
                            margin: 0; padding: 0; height: 100%; width: 100%; 
                            overflow: hidden; background-color: #000; font-family: sans-serif; 
                        }
                        #overlay {
                            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                            background: #000; display: flex;
                            justify-content: center; align-items: center; cursor: pointer;
                            z-index: 10;
                        }
                        #overlay h1 {
                            color: white; border: 2px solid white; padding: 20px 40px;
                            border-radius: 10px; transition: 0.3s;
                        }
                        #overlay h1:hover { background: white; color: black; }
                        iframe { width: 100%; height: 100vh; border: none; display: none; }
                    </style>
                </head>
                <body>
                    <div id="overlay"><h1>CLICK TO START</h1></div>
                    
                    <iframe id="frame" 
                            src="https://nexus-revived.onrender.com/" 
                            sandbox="allow-forms allow-modals allow-popups allow-scripts allow-same-origin allow-storage-access-by-user-activation">
                    </iframe>

                    <script>
                        const overlay = document.getElementById('overlay');
                        const frame = document.getElementById('frame');

                        overlay.addEventListener('click', function() {
                            overlay.style.display = 'none';
                            frame.style.display = 'block';
                            
                            // Sets the anti-close listener for the about:blank tab
                            window.addEventListener('beforeunload', function (e) {
                                e.preventDefault();
                                e.returnValue = ''; 
                            });
                        });
                    <\/script>
                </body>
                </html>
            `;

            win.document.open();
            win.document.write(code);
            win.document.close();
            
            // Redirect the launcher to a neutral page
            window.location.href = "https://www.google.com";
        }

        launch();
    </script>
</body>
</html>
